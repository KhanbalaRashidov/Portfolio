---
title: 'Mein erster eigener Server'
publishedAt: '2024-01-14'
summary: 'Das ist mein erster Linux-Server mit einem virtuellen privaten Server und Docker'
language: 'de'
translation: 'own-linux-server'
tags:
  - Docker
  - Linux
---

<Image
  alt={`Server stats`}
  src={`/images/own-linux-server/server-stats.png`}
  width={3024}
  height={1964}
  priority
/>

Das ist mein erster Linux-Server mit einem virtuellen privaten Server und Docker.
In diesem Artikel geht es um meine Erfahrungen mit meinem ersten Server und wie ich ihn eingerichtet habe.

## Inhaltsverzeichnis

- [Warum ein Server?](#warum-ein-server)
- [Anbieter](#anbieter)
- [Betriebssystem](#betriebssystem)
- [Konfigurationen](#konfigurationen)
- [Sicherheit](#sicherheit)
  - [SSH](#ssh)
  - [CrowdSec](#crowdsec)
- [Services](#services)
  - [Minecraft Server](#minecraft-server)
  - [Portainer](#portainer)
  - [Nginx](#nginx)
  - [Netdata](#netdata)
  - [Watchtower](#watchtower)
  - [Gitea](#gitea)
    - [Gitea Runner](#gitea-runner)
  - [Docker Deploy API](#docker-deploy-api)
- [Werkzeuge](#werkzeuge)
  - [Neovim](#neovim)
  - [Tmux](#tmux)
  - [Acme.sh](#acmesh)
- [Backups](#backups)
- [Fazit und Aussicht](#fazit-und-aussicht)

## Warum ein Server?

Bisher habe ich alle meine Projekte bei [Vercel](https://vercel.com) gehostet, was immer eine sehr gute Erfahrung war.
Aber ich wollte mehr Kontrolle √ºber meine Projekte haben und auch einige andere Dienste wie einen Minecraft-Server oder meinen eigenen Git-Server hosten.
Also habe ich mich entschieden, einen virtuellen privaten Server zu mieten und einige meiner Projekte darauf zu hosten und einfach damit zu experimentieren.

## Anbieter

Es gibt viele Anbieter da drau√üen und jeder hat seine Vor- und Nachteile. F√ºr mich war es wichtig, einen Anbieter in Deutschland mit einem guten Preis-Leistungs-Verh√§ltnis zu haben.
Ich habe mich f√ºr [Ionos](https://www.ionos.de) entschieden, weil ich bereits meine Domain dort habe und das Preis-Leistungs-Verh√§ltnis meiner Meinung nach wirklich gut ist.
Ich habe den [VPS Linux M](https://www.ionos.de/server/vps) gew√§hlt, der 2 vCores, 4 GB RAM und 160 GB SSD-Speicher f√ºr 8 ‚Ç¨/Monat bietet.

## Betriebssystem

Das vorinstallierte Betriebssystem ist Ubuntu, was f√ºr mich eine gute Wahl ist, weil ich bereits Erfahrung damit habe.
Es gibt viele Self-Hosting-L√∂sungen, die eine einfache Installation und Verwaltung verschiedener Dienste bieten, aber ich wollte alles selbst machen, um mehr dar√ºber zu lernen.
Also entschied ich mich, [Docker](https://www.docker.com) zu verwenden, um alle meine Dienste zu verwalten, und [Docker Compose](https://docs.docker.com/compose/) f√ºr die Verwaltung der Container.

## Konfigurationen

Um meine Konfiguration im Blick zu behalten, habe ich ein privates Repository auf [GitHub](https://github.com), in dem ich alle meine Konfigurationsdateien speichere.
Ich verwende auch GitHub Actions, um meine Konfiguration automatisch auf den Server zu deployen, wenn ich in das Repository pushe.

## Sicherheit

Eine der wichtigsten Dinge ist die Sicherheit. Ich m√∂chte meinen Server so sicher wie m√∂glich halten und auch dar√ºber informiert sein, was auf meinem Server passiert.
Ein Vorteil meines Anbieters ist ihre Firewall, mit der ich konfigurieren kann, welche Ports ge√∂ffnet und welche geschlossen sind. Ich habe nur die Ports ge√∂ffnet, die f√ºr meine Dienste ben√∂tigt werden.

### SSH

Ich m√∂chte kein Passwort f√ºr die Anmeldung an meinen Server verwenden, also habe ich mich entschieden, SSH-Keys zu nutzen.
Au√üerdem habe ich den Port des SSH-Servers auf einen zuf√§lligen Port ge√§ndert, um es Angreifern schwerer zu machen, den SSH-Server zu finden.

```conf
# /etc/ssh/sshd_config
PasswordAuthentication no
Port 15729
StrictModes yes
MaxAuthTries 5
MaxSessions 3
```

Mit dieser SSH-Konfiguration kann ich sicherstellen, dass der SSH-Server gegen die meisten Angriffe gesch√ºtzt ist.

### CrowdSec

Nach dem Schutz des SSH-Servers wollte ich den Rest des Servers sch√ºtzen, weshalb ich [CrowdSec](https://crowdsec.net) installiert habe.

<Callout emoji="üîí">
  [CrowdSec](https://crowdsec.net) ist eine Open-Source-Software, die b√∂sartige
  Akteure auf verschiedenen Ebenen durch Log-Analyse und Bedrohungsmuster,
  sogenannte Szenarien, erkennt und blockiert.
</Callout>

Ich habe CrowdSec so konfiguriert, dass es die Protokolle meines Nginx-Servers liest und dann einen "Bouncer" verwendet, um b√∂sartige Anfragen zu blockieren.

## Services

### Minecraft Server

Das Wesentliche f√ºr jeden Server. Ich denke, ich muss nicht erw√§hnen, warum jemand einen Minecraft-Server braucht.
Ich kann es sehr empfehlen, einen Minecraft-Server selbst einzurichten, wenn man nicht mit Docker vertraut sind und es lernen m√∂chten.
Es ist eine gute M√∂glichkeit zu lernen, wie man Docker verwendet und konfiguriert.

### Portainer

Zur Verwaltung aller meiner Container verwende ich [Portainer](https://www.portainer.io), was auch als Docker-Container installiert werden kann.
Es ist bei weitem das einfachste Setup aller Container, weil man nur den Container starten muss und dann auf die Weboberfl√§che zugreifen kann.

```yaml
# docker-compose.yml
services:
  portainer:
    image: portainer/portainer-ce:latest
    container_name: portainer
    restart: unless-stopped
    ports:
      - '9443:9443'
    volumes:
      - ./portainer-data:/data
      - /var/run/docker.sock:/var/run/docker.sock
```

### Nginx

[Nginx](https://www.nginx.com) ist der Webserver, der alles zusammenf√ºhrt.
Der komplizierteste Teil hier war das Konfigurieren der Subdomains und der SSL-Zertifikate, aber danach k√∂nnen einfach Routen hinzugef√ºgt werden.

```conf
location /portainer/ {
        proxy_pass http://portainer:9000/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
}
```

### Netdata

[Netdata](https://www.netdata.cloud) ist ein √úberwaltungstool, das Metriken √ºber den Server bereitstellt.
Meiner Meinung nach ist das ein Muss f√ºr jeden Server, weil es viele Informationen √ºber die Servernutzung und seine Dienste liefert.

<Image
  alt={`Netdata dashboard`}
  src={`/images/own-linux-server/netdata.png`}
  width={3024}
  height={1964}
  priority
/>

Ein gro√üer Vorteil von Netdata sind die Webhook-Benachrichtigungen, die verwendet werden k√∂nnen, um Benachrichtigungen an Discord, E-Mail oder Slack zu senden.
Ich habe mich entschieden, einen Discord-Server zu erstellen, auf dem ich alle Arten von Benachrichtigungen von meinem Server erhalten kann.
Wenn mein Server nicht erreichbar ist, erhalte ich jetzt eine Benachrichtigung von Netdata und kann √ºberpr√ºfen, was passiert.

### Watchtower

[Watchtower](https://github.com/containrrr/watchtower) ist ein Container, der automatisch alle anderen Container-Images aktualisiert.
Das ist eine gro√üartige M√∂glichkeit, alle Container auf dem neuesten Stand zu halten, ohne das manuell machen zu m√ºssen.
Es hat auch die M√∂glichkeit, Benachrichtigungen an Discord zu senden, was gro√üartig ist, um die Updates im Auge zu behalten.

### Gitea

[Gitea](https://gitea.io) ist ein selbstgehosteter Git-Dienst, der eine gute Alternative zu GitHub ist.
Ich habe nicht vor, alle meine Repositories auf meinen eigenen Git-Server zu verschieben, aber ich habe einen Mirror f√ºr alle meine Repositories eingerichtet.
So kann ich immer noch GitHub verwenden, aber auch eine Sicherung meiner Repositories auf meinem eigenen Server haben.

Es hat auch eine eingebaute Container-Registry f√ºr verschiedene Pakete wie npm, Docker und mehr.

Beim Einrichten von Gitea habe ich zun√§chst dieselbe Subdomain f√ºr alles verwendet und einfach eine Route f√ºr jeden Dienst hinzugef√ºgt.
Das hat gut funktioniert, bis ich die Container-Registry verwenden wollte.
Docker kann keine Routen verarbeiten und verwendet nur die Subdomain, um auf die Registry zuzugreifen, weshalb ich die Konfiguration √§ndern musste.

Ich habe zuerst eine neue Route f√ºr die Container-Registry hinzugef√ºgt und sp√§ter dann die Konfiguration ge√§ndert, um f√ºr jeden Dienst eine Subdomain zu verwenden.
So habe ich eine saubere Konfiguration und kann auch die Container-Registry verwenden.

#### Gitea Runner

Das Pendant zu GitHub Actions sind die Gitea Actions, die verwendet werden k√∂nnen, um Jobs auf dem Server auszuf√ºhren.
Actions ben√∂tigen einen Runner, der ein Dienst ist, der die Jobs ausf√ºhrt.
Ich denke nicht, dass ich diese Funktion viel verwenden werde, aber ich wollte es mal ausprobieren und sehen, wie es funktioniert.

### Docker Deploy API

Die [Docker Deploy API](https://github.com/timokoessler/docker-deploy-api) ist ein Projekt von einem Freund von mir.
Sie stellt eine API bereit, die zum Bereitstellen und Aktualisieren von Docker-Containern verwendet werden kann.
Sowas kann sehr n√ºtzlich sein, wenn man Container aus einer CI/CD-Pipeline oder einfach aus einem Skript heraus bereitstellen m√∂chte.

## Werkzeuge

Um mit dem Server zu arbeiten, ben√∂tigte ich einige Werkzeuge, um das Bearbeiten von Dateien zu erleichtern.

### Neovim

<Image
  alt={`AstroNvim`}
  src={`/images/own-linux-server/astronvim.webp`}
  width={3024}
  height={1964}
  priority
/>

Mein zweiter Lieblingseditor nach VS Code ist [Neovim](https://neovim.io).
Ich verwende es f√ºr einige meiner Projekte und auch, um Dateien auf dem Server zu bearbeiten.
Meine bevorzugte Konfiguration f√ºr Neovim ist [AstroNvim](https://astronvim.com/),
weil es viele n√ºtzliche Plugins und eine gute Konfiguration zum einfachen Einstieg hat.
Ich habe [meine eigene Konfiguration](https://github.com/alex289/astronvim_config) hinzugef√ºgt, um sie noch besser zu machen.

### Tmux

Um mehrere Dinge gleichzeitig zu erledigen, verwende ich [Tmux](https://github.com/tmux/tmux), einen Terminal-Multiplexer.
Er erm√∂glicht es mir, das Terminal in mehrere Paneele aufzuteilen und auch mehrere Sitzungen zu erstellen, damit ich gleichzeitig Dateien bearbeiten und Befehle ausf√ºhren kann.

### Acme.sh

Eine der l√§stigsten Aufgaben ist es, ein SSL-Zertifikat f√ºr eine Domain zu erhalten.
Gl√ºcklicherweise gibt es [Acme.sh](https://github.com/acmesh-official/acme.sh), ein gro√üartiges Tool, um kostenlos SSL-Zertifikate zu erhalten.
Es hat auch Unterst√ºtzung f√ºr Domains meines Anbieters, was es noch einfacher macht, ein Zertifikat zu erhalten.

Um ein Zertifikat zu erhalten, muss ich nur den folgenden Befehl ausf√ºhren:

```bash
acme.sh --issue --dns dns_ionos -d my-domain.com \
    --webroot nginx/html \
    --cert-file nginx/ssl/my-domain.com.crt \
    --key-file nginx/ssl/my-domain.com.key \
    --fullchain-file nginx/ssl/my-domain.com.fullchain.crt \
    --reloadcmd "docker restart nginx"
```

Ich habe auch ein Skript erstellt, das die Zertifikate automatisch alle paar Monate erneuert, damit ich mir dar√ºber keine Sorgen mehr machen muss.

## Backups

Das letzte, was ich einrichten wollte, ist eine Backup-L√∂sung, um sicherzustellen, dass ich keine Daten meiner Dienste verliere.
Es gibt viele Optionen wie [Borg](https://www.borgbackup.org), aber gl√ºcklicherweise hat mein Anbieter bereits eine Backup-L√∂sung, die ich verwenden kann.
Es handelt sich um einen Flex-Plan, was bedeutet, dass ich f√ºr das bezahle, was ich benutze, und es hat bereits einen einfach zu installierenden Backup-Agenten.
Nach der Einrichtung habe ich einen Backup-Plan erstellt. Dieser Plan kombiniert inkrementelle und vollst√§ndige Backups, um sicherzustellen, dass ich alles wiederherstellen kann, wenn es n√∂tig ist, und zwar jederzeit.

## Fazit und Aussicht

Das war mein erster Server, und ich habe viel √ºber Docker und Linux gelernt.
Obwohl es f√ºr andere vielleicht nicht n√ºtzlich ist, wollte ich trotzdem dar√ºber schreiben, um meinen Fortschritt festzuhalten und meine Erfahrungen zu teilen.
Insgesamt bin ich sehr zufrieden mit dem Server, und ich freue mich darauf, weitere Dienste darauf zu hosten.

√úber Feedback zu meinem Server und zu diesem Artikel w√ºrde ich mich freuen.
Bei Fragen oder Anmerkungen, k√∂nnt ihr mich gerne auf [X/Twitter](https://twitter.com/_alex289) erreichen.
